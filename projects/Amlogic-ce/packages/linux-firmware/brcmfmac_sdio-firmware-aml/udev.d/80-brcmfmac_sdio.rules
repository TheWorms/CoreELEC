################################################################################
# udev rules file for loading brcmfmac_sdio-firmware-aml
################################################################################

ACTION!="add", GOTO="end"
SUBSYSTEMS=="sdio", ATTRS{vendor}=="0x02d0", ATTRS{device}=="0xa9bf", GOTO="begin"
SUBSYSTEMS=="sdio", ATTRS{vendor}=="0x02d0", ATTRS{device}=="0x4330", GOTO="begin"
SUBSYSTEMS=="sdio", ATTRS{vendor}=="0x02d0", ATTRS{device}=="0x4356", GOTO="begin"
SUBSYSTEMS=="sdio", ATTRS{vendor}=="0x02d0", ATTRS{device}=="0x4359", GOTO="begin"
GOTO="end"
LABEL="begin"
### Broadcom bcm43455c0 bluetooth device
ATTRS{vendor}=="0x02d0", ATTRS{device}=="0xa9bf", \
  ENV{brcm_device}="bcm43455c0"
### Broadcom bcm40183b2 bluetooth device
ATTRS{vendor}=="0x02d0", ATTRS{device}=="0x4330", \
  ENV{brcm_device}="bcm40183b2"
### Broadcom bcm4356a2 bluetooth device
ATTRS{vendor}=="0x02d0", ATTRS{device}=="0x4356", \
  ENV{brcm_device}="bcm4356a2"
### Broadcom bcm4359c0 bluetooth device
ATTRS{vendor}=="0x02d0", ATTRS{device}=="0x4359", \
  ENV{brcm_device}="bcm4359c0"

ENV{brcm_device}=="bcm*", ACTION=="add", \
  TAG+="systemd", ENV{SYSTEMD_WANTS}+="brcmfmac_sdio-firmware-aml@$env{brcm_device}.service"
LABEL="end"
